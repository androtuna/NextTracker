import { useLiveQuery } from 'dexie-react-hooks';
import { db } from '@/db/db';

type Language = 'tr' | 'en';

const translations = {
    tr: {
        dashboard: 'Panel',
        search: 'Keşfet',
        settings: 'Ayarlar',
        watchList: 'İzleme Listem',
        watchListDesc: 'Takip ettiğiniz içerikler burada görüntülenir.',
        planned: 'Planlanan',
        watching: 'İzleniyor',
        completed: 'Tamamlanan',
        dropped: 'Bırakıldı',
        all: 'Tümü',
        details: 'Detaylar',
        movie: 'Film',
        series: 'Dizi',
        emptyList: 'Listeniz boş.',
        emptyCategory: 'Bu kategoride içerik yok.',
        emptyListAction: 'sayfasından içerik ekleyin.',
        addContent: 'Keşfet',
        searchPlaceholder: 'Film veya dizi ara...',
        add: 'Ekle',
        added: 'Eklendi',
        noImage: 'Görsel Yok',
        settingsTitle: 'Ayarlar',
        trending: "Haftanın Trendleri",
        popularMovies: "Popüler Filmler",
        popularTV: "Popüler Diziler",
        topRated: "En Çok Beğenilenler",
        addToList: "Listeme Ekle",
        inList: "Listende",

        settingsDesc: 'Uygulama yapılandırması ve veri yönetimi.',
        apiConfig: 'API Yapılandırması',
        tmdbApiKey: 'TMDB API Key (v3 Auth)',
        tmdbDesc: 'Film verilerini çekmek için gereklidir.',
        syncConfig: 'Nextcloud Senkronizasyon',
        serverUrl: 'Sunucu URL',
        serverUrlDesc: "WebDAV URL'nizi girin.",
        username: 'Kullanıcı Adı',
        password: 'Şifre / App Password',
        testConnection: 'Bağlantıyı Test Et',
        restore: 'Geri Yükle',
        backup: 'Yedekle',
        save: 'Kaydet',
        saved: 'Ayarlar kaydedildi.',
        saveError: 'Kaydedilemedi.',
        testing: 'Bağlantı test ediliyor...',
        testSuccess: 'Nextcloud bağlantısı başarılı!',
        testFail: 'Bağlantı başarısız. Bilgileri kontrol edin.',
        backingUp: 'Yedekleniyor...',
        backupSuccess: 'Yedekleme başarılı!',
        restoring: 'Geri yükleniyor...',
        restoreConfirm: 'Yerel veriler silinecek ve yedekten geri yüklenecek. Onaylıyor musunuz?',
        restoreSuccess: 'Geri yükleme tamamlandı! Sayfa yenileniyor...',
        backupDesc: 'Verilerinizi JSON dosyası olarak indirin veya geri yükleyin. Veriler cihazınızda kalır.',
        downloadBackup: 'Yedeği İndir',
        restoreBackup: 'Yedeği Yükle',
        error: 'Hata',
        language: 'Dil / Language',
    },
    en: {
        dashboard: 'Dashboard',
        search: 'Discover',
        settings: 'Settings',
        watchList: 'My Watchlist',
        watchListDesc: 'Your tracked content appears here.',
        planned: 'Planned',
        watching: 'Watching',
        completed: 'Completed',
        dropped: 'Dropped',
        all: 'All',
        details: 'Details',
        movie: 'Movie',
        series: 'Series',
        emptyList: 'Your list is empty.',
        emptyCategory: 'No content in this category.',
        emptyListAction: 'page to add content.',
        addContent: 'Discover',
        searchPlaceholder: 'Search for movies or TV shows...',
        add: 'Add',
        added: 'Added',
        noImage: 'No Image',
        settingsTitle: 'Settings',
        trending: "Trending This Week",
        popularMovies: "Popular Movies",
        popularTV: "Popular TV Shows",
        topRated: "Top Rated",
        addToList: "Add to List",
        inList: "In List",

        settingsDesc: 'Application configuration and data management.',
        apiConfig: 'API Configuration',
        tmdbApiKey: 'TMDB API Key (v3 Auth)',
        tmdbDesc: 'Required to fetch movie data.',
        syncConfig: 'Nextcloud Sync',
        serverUrl: 'Server URL',
        serverUrlDesc: 'Enter your WebDAV URL.',
        username: 'Username',
        password: 'Password / App Password',
        testConnection: 'Test Connection',
        restore: 'Restore',
        backup: 'Backup',
        save: 'Save',
        saved: 'Settings saved.',
        saveError: 'Could not save.',
        testing: 'Testing connection...',
        testSuccess: 'Nextcloud connection successful!',
        testFail: 'Connection failed. Check your credentials.',
        backingUp: 'Backing up...',
        backupSuccess: 'Backup successful!',
        restoring: 'Restoring...',
        restoreConfirm: 'Local data will be replaced with backup. Are you sure?',
        restoreSuccess: 'Restore complete! Refreshing page...',
        backupDesc: 'Download or restore your data as a JSON file. Data stays on your device.',
        downloadBackup: 'Download Backup',
        restoreBackup: 'Restore Backup',
        error: 'Error',
        language: 'Language',
    }
};

export function useTranslation() {
    const settings = useLiveQuery(() => db.settings.get(1));
    const lang: Language = settings?.language || 'tr';

    const t = (key: keyof typeof translations['tr']) => {
        return translations[lang][key] || key;
    };

    return { t, lang };
}
